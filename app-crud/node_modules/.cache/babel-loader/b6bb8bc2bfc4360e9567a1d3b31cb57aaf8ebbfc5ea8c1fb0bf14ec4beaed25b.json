{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport SidebarComponent from '@/components/SidebarComponent.vue';\nimport { ref, onMounted } from 'vue';\nimport productService from '@/services/productService';\nimport ProductForm from '@/components/ProductForm.vue';\nimport { useRouter, useRoute } from 'vue-router';\nexport default {\n  components: {\n    ProductForm,\n    SidebarComponent\n  },\n  setup() {\n    const product = ref(null);\n    const loading = ref(true);\n    const error = ref(null);\n    const saving = ref(false);\n    const router = useRouter();\n    const route = useRoute();\n    const id = route.params.id;\n    const load = async () => {\n      loading.value = true;\n      error.value = null;\n      try {\n        const res = await productService.getProductById(id);\n        product.value = res.data;\n      } catch (err) {\n        error.value = 'Error cargando el producto';\n        console.error(err);\n      } finally {\n        loading.value = false;\n      }\n    };\n    const submit = async payload => {\n      saving.value = true;\n      error.value = null;\n      try {\n        await productService.updateProduct(id, payload);\n        router.push({\n          name: 'ProductList'\n        });\n      } catch (err) {\n        error.value = 'Error actualizando producto';\n        console.error(err);\n      } finally {\n        saving.value = false;\n      }\n    };\n    const cancel = () => {\n      router.push({\n        name: 'ProductList'\n      });\n    };\n    onMounted(load);\n    return {\n      product,\n      loading,\n      error,\n      saving,\n      submit,\n      cancel\n    };\n  }\n};","map":{"version":3,"names":["SidebarComponent","ref","onMounted","productService","ProductForm","useRouter","useRoute","components","setup","product","loading","error","saving","router","route","id","params","load","value","res","getProductById","data","err","console","submit","payload","updateProduct","push","name","cancel"],"sources":["C:\\Users\\SCIS2PC21\\Desktop\\1111\\trabajosDesarrolloWeb\\app-crud\\src\\views\\ProductEditView.vue"],"sourcesContent":["<template>\r\n  <!-- Barra superior -->\r\n    <SidebarComponent />\r\n  <div class=\"flex-grow-1 p-4 bg-light\">\r\n   <h3>Editar producto</h3>\r\n\r\n<div v-if=\"loading\" class=\"mb-3\">Cargando...</div>\r\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\r\n\r\n    <ProductForm\r\n      v-if=\"product\"\r\n      :product=\"product\"\r\n      :saving=\"saving\"\r\n      @submit=\"submit\"\r\n      @cancel=\"cancel\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SidebarComponent from '@/components/SidebarComponent.vue';\r\nimport { ref, onMounted } from 'vue'\r\nimport productService from '@/services/productService'\r\nimport ProductForm from '@/components/ProductForm.vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nexport default {\r\n  components: { ProductForm, SidebarComponent },\r\n  setup() {\r\n    const product = ref(null)\r\n    const loading = ref(true)\r\n    const error = ref(null)\r\n    const saving = ref(false)\r\n\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const id = route.params.id\r\n\r\n    const load = async () => {\r\n      loading.value = true\r\n      error.value = null\r\n      try {\r\n        const res = await productService.getProductById(id)\r\n        product.value = res.data\r\n      } catch (err) {\r\n        error.value = 'Error cargando el producto'\r\n        console.error(err)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const submit = async (payload) => {\r\n      saving.value = true\r\n      error.value = null\r\n      try {\r\n        await productService.updateProduct(id, payload)\r\n        router.push({ name: 'ProductList' })\r\n      } catch (err) {\r\n        error.value = 'Error actualizando producto'\r\n        console.error(err)\r\n      } finally {\r\n        saving.value = false\r\n      }\r\n    }\r\n\r\n    const cancel = () => {\r\n      router.push({ name: 'ProductList' })\r\n    }\r\n\r\n    onMounted(load)\r\n\r\n    return { product, loading, error, saving, submit, cancel }\r\n  }\r\n}\r\n</script>"],"mappings":";AAoBA,OAAOA,gBAAe,MAAO,mCAAmC;AAChE,SAASC,GAAG,EAAEC,SAAQ,QAAS,KAAI;AACnC,OAAOC,cAAa,MAAO,2BAA0B;AACrD,OAAOC,WAAU,MAAO,8BAA6B;AACrD,SAASC,SAAS,EAAEC,QAAO,QAAS,YAAW;AAE/C,eAAe;EACbC,UAAU,EAAE;IAAEH,WAAW;IAAEJ;EAAiB,CAAC;EAC7CQ,KAAKA,CAAA,EAAG;IACN,MAAMC,OAAM,GAAIR,GAAG,CAAC,IAAI;IACxB,MAAMS,OAAM,GAAIT,GAAG,CAAC,IAAI;IACxB,MAAMU,KAAI,GAAIV,GAAG,CAAC,IAAI;IACtB,MAAMW,MAAK,GAAIX,GAAG,CAAC,KAAK;IAExB,MAAMY,MAAK,GAAIR,SAAS,CAAC;IACzB,MAAMS,KAAI,GAAIR,QAAQ,CAAC;IACvB,MAAMS,EAAC,GAAID,KAAK,CAACE,MAAM,CAACD,EAAC;IAEzB,MAAME,IAAG,GAAI,MAAAA,CAAA,KAAY;MACvBP,OAAO,CAACQ,KAAI,GAAI,IAAG;MACnBP,KAAK,CAACO,KAAI,GAAI,IAAG;MACjB,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMhB,cAAc,CAACiB,cAAc,CAACL,EAAE;QAClDN,OAAO,CAACS,KAAI,GAAIC,GAAG,CAACE,IAAG;MACzB,EAAE,OAAOC,GAAG,EAAE;QACZX,KAAK,CAACO,KAAI,GAAI,4BAA2B;QACzCK,OAAO,CAACZ,KAAK,CAACW,GAAG;MACnB,UAAU;QACRZ,OAAO,CAACQ,KAAI,GAAI,KAAI;MACtB;IACF;IAEA,MAAMM,MAAK,GAAI,MAAOC,OAAO,IAAK;MAChCb,MAAM,CAACM,KAAI,GAAI,IAAG;MAClBP,KAAK,CAACO,KAAI,GAAI,IAAG;MACjB,IAAI;QACF,MAAMf,cAAc,CAACuB,aAAa,CAACX,EAAE,EAAEU,OAAO;QAC9CZ,MAAM,CAACc,IAAI,CAAC;UAAEC,IAAI,EAAE;QAAc,CAAC;MACrC,EAAE,OAAON,GAAG,EAAE;QACZX,KAAK,CAACO,KAAI,GAAI,6BAA4B;QAC1CK,OAAO,CAACZ,KAAK,CAACW,GAAG;MACnB,UAAU;QACRV,MAAM,CAACM,KAAI,GAAI,KAAI;MACrB;IACF;IAEA,MAAMW,MAAK,GAAIA,CAAA,KAAM;MACnBhB,MAAM,CAACc,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAc,CAAC;IACrC;IAEA1B,SAAS,CAACe,IAAI;IAEd,OAAO;MAAER,OAAO;MAAEC,OAAO;MAAEC,KAAK;MAAEC,MAAM;MAAEY,MAAM;MAAEK;IAAO;EAC3D;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}