{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex-grow-1 p-4 bg-light\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"alert alert-danger\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"alert alert-success\"\n};\nconst _hoisted_4 = {\n  class: \"mt-3\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SidebarComponent = _resolveComponent(\"SidebarComponent\");\n  const _component_ProductTable = _resolveComponent(\"ProductTable\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" Barra superior \"), _createVNode(_component_SidebarComponent), _createElementVNode(\"div\", _hoisted_1, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"Productos\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    class: \"btn btn-success mb-3\",\n    onClick: _cache[0] || (_cache[0] = $event => _ctx.$router.push('/products/new'))\n  }, \"Nuevo\"), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.success ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($setup.success), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createVNode(_component_ProductTable, {\n    products: $setup.products,\n    onEdit: $setup.goEdit,\n    onDelete: $setup.handleDelete\n  }, null, 8 /* PROPS */, [\"products\", \"onEdit\", \"onDelete\"]), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"button\", {\n    class: \"btn btn-success\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.goCreate && $setup.goCreate(...args))\n  }, \"Agregar producto\")])])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createCommentVNode","_createVNode","_component_SidebarComponent","_createElementVNode","_hoisted_1","onClick","_cache","$event","_ctx","$router","push","$setup","error","_createElementBlock","_hoisted_2","_toDisplayString","success","_hoisted_3","_component_ProductTable","products","onEdit","goEdit","onDelete","handleDelete","_hoisted_4","args","goCreate"],"sources":["C:\\Users\\SCIS2PC21\\Desktop\\1111\\trabajosDesarrolloWeb\\app-crud\\src\\views\\ProductListView.vue"],"sourcesContent":["<template>\r\n  <!-- Barra superior -->\r\n    <SidebarComponent />\r\n  <div class=\"flex-grow-1 p-4 bg-light\">\r\n    <h2>Productos</h2>\r\n    <button class=\"btn btn-success mb-3\" @click=\"$router.push('/products/new')\">Nuevo</button>\r\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\r\n    <div v-if=\"success\" class=\"alert alert-success\">{{ success }}</div>\r\n\r\n    <ProductTable\r\n      :products=\"products\"\r\n      @edit=\"goEdit\"\r\n      @delete=\"handleDelete\"\r\n    />\r\n\r\n    <div class=\"mt-3\">\r\n      <button class=\"btn btn-success\" @click=\"goCreate\">Agregar producto</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SidebarComponent from '@/components/SidebarComponent.vue';\r\nimport { ref, onMounted } from 'vue'\r\nimport productService from '@/services/productService'\r\nimport ProductTable from '@/components/ProductTable.vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  components: { ProductTable, SidebarComponent },\r\n  setup() {\r\n    const products = ref([])\r\n    const error = ref(null)\r\n    const success = ref(null)\r\n    const router = useRouter()\r\n\r\n    const load = async () => {\r\n      error.value = null\r\n      try {\r\n        const res = await productService.getAllProducts()\r\n        products.value = res.data\r\n      } catch (err) {\r\n        error.value = 'Error cargando productos'\r\n        console.error(err)\r\n      }\r\n    }\r\n\r\n    const goEdit = (id) => {\r\n      router.push({ name: 'ProductEdit', params: { id } })\r\n    }\r\n\r\n    const goCreate = () => {\r\n      router.push({ name: 'ProductCreate' })\r\n    }\r\n\r\n    const handleDelete = async (id) => {\r\n      error.value = null\r\n      success.value = null\r\n      try {\r\n        await productService.deleteProduct(id)\r\n        success.value = 'Producto eliminado correctamente'\r\n        await load()\r\n      } catch (err) {\r\n        error.value = 'Error eliminando producto'\r\n        console.error(err)\r\n      }\r\n    }\r\n\r\n    onMounted(load)\r\n\r\n    return { products, error, success, goEdit, goCreate, handleDelete }\r\n  }\r\n}\r\n</script>"],"mappings":";;;EAGOA,KAAK,EAAC;AAA0B;;;EAGjBA,KAAK,EAAC;;;;EACJA,KAAK,EAAC;;;EAQrBA,KAAK,EAAC;AAAM;;;;6DAdnBC,mBAAA,oBAAuB,EACrBC,YAAA,CAAoBC,2BAAA,GACtBC,mBAAA,CAeM,OAfNC,UAeM,G,0BAdJD,mBAAA,CAAkB,YAAd,WAAS,qBACbA,mBAAA,CAA0F;IAAlFJ,KAAK,EAAC,sBAAsB;IAAEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,MAAAC,MAAA,IAAEC,IAAA,CAAAC,OAAO,CAACC,IAAI;KAAmB,OAAK,GACtEC,MAAA,CAAAC,KAAK,I,cAAhBC,mBAAA,CAA8D,OAA9DC,UAA8D,EAAAC,gBAAA,CAAdJ,MAAA,CAAAC,KAAK,oB,mCAC1CD,MAAA,CAAAK,OAAO,I,cAAlBH,mBAAA,CAAmE,OAAnEI,UAAmE,EAAAF,gBAAA,CAAhBJ,MAAA,CAAAK,OAAO,oB,mCAE1Df,YAAA,CAIEiB,uBAAA;IAHCC,QAAQ,EAAER,MAAA,CAAAQ,QAAQ;IAClBC,MAAI,EAAET,MAAA,CAAAU,MAAM;IACZC,QAAM,EAAEX,MAAA,CAAAY;+DAGXpB,mBAAA,CAEM,OAFNqB,UAEM,GADJrB,mBAAA,CAA2E;IAAnEJ,KAAK,EAAC,iBAAiB;IAAEM,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAmB,IAAA,KAAEd,MAAA,CAAAe,QAAA,IAAAf,MAAA,CAAAe,QAAA,IAAAD,IAAA,CAAQ;KAAE,kBAAgB,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}