{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport SidebarComponent from '@/components/SidebarComponent.vue';\nimport { ref, onMounted } from 'vue';\nimport productService from '@/services/productService';\nimport ProductTable from '@/components/ProductTable.vue';\nimport { useRouter } from 'vue-router';\nexport default {\n  components: {\n    ProductTable,\n    SidebarComponent\n  },\n  setup() {\n    const products = ref([]);\n    const error = ref(null);\n    const success = ref(null);\n    const router = useRouter();\n    const load = async () => {\n      error.value = null;\n      try {\n        const res = await productService.getAllProducts();\n        products.value = res.data;\n      } catch (err) {\n        error.value = 'Error cargando productos';\n        console.error(err);\n      }\n    };\n    const goEdit = id => {\n      router.push({\n        name: 'ProductEdit',\n        params: {\n          id\n        }\n      });\n    };\n    const goCreate = () => {\n      router.push({\n        name: 'ProductCreate'\n      });\n    };\n    const handleDelete = async id => {\n      error.value = null;\n      success.value = null;\n      try {\n        await productService.deleteProduct(id);\n        success.value = 'Producto eliminado correctamente';\n        await load();\n      } catch (err) {\n        error.value = 'Error eliminando producto';\n        console.error(err);\n      }\n    };\n    onMounted(load);\n    return {\n      products,\n      error,\n      success,\n      goEdit,\n      goCreate,\n      handleDelete\n    };\n  }\n};","map":{"version":3,"names":["SidebarComponent","ref","onMounted","productService","ProductTable","useRouter","components","setup","products","error","success","router","load","value","res","getAllProducts","data","err","console","goEdit","id","push","name","params","goCreate","handleDelete","deleteProduct"],"sources":["C:\\Users\\SCIS2PC21\\Desktop\\1111\\trabajosDesarrolloWeb\\app-crud\\src\\views\\ProductListView.vue"],"sourcesContent":["<template>\r\n  <!-- Barra superior -->\r\n    <SidebarComponent />\r\n  <div class=\"flex-grow-1 p-4 bg-light\">\r\n    <h2>Productos</h2>\r\n    <button class=\"btn btn-success mb-3\" @click=\"$router.push('/products/new')\">Nuevo</button>\r\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\r\n    <div v-if=\"success\" class=\"alert alert-success\">{{ success }}</div>\r\n\r\n    <ProductTable\r\n      :products=\"products\"\r\n      @edit=\"goEdit\"\r\n      @delete=\"handleDelete\"\r\n    />\r\n\r\n    <div class=\"mt-3\">\r\n      <button class=\"btn btn-success\" @click=\"goCreate\">Agregar producto</button>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SidebarComponent from '@/components/SidebarComponent.vue';\r\nimport { ref, onMounted } from 'vue'\r\nimport productService from '@/services/productService'\r\nimport ProductTable from '@/components/ProductTable.vue'\r\nimport { useRouter } from 'vue-router'\r\n\r\nexport default {\r\n  components: { ProductTable, SidebarComponent },\r\n  setup() {\r\n    const products = ref([])\r\n    const error = ref(null)\r\n    const success = ref(null)\r\n    const router = useRouter()\r\n\r\n    const load = async () => {\r\n      error.value = null\r\n      try {\r\n        const res = await productService.getAllProducts()\r\n        products.value = res.data\r\n      } catch (err) {\r\n        error.value = 'Error cargando productos'\r\n        console.error(err)\r\n      }\r\n    }\r\n\r\n    const goEdit = (id) => {\r\n      router.push({ name: 'ProductEdit', params: { id } })\r\n    }\r\n\r\n    const goCreate = () => {\r\n      router.push({ name: 'ProductCreate' })\r\n    }\r\n\r\n    const handleDelete = async (id) => {\r\n      error.value = null\r\n      success.value = null\r\n      try {\r\n        await productService.deleteProduct(id)\r\n        success.value = 'Producto eliminado correctamente'\r\n        await load()\r\n      } catch (err) {\r\n        error.value = 'Error eliminando producto'\r\n        console.error(err)\r\n      }\r\n    }\r\n\r\n    onMounted(load)\r\n\r\n    return { products, error, success, goEdit, goCreate, handleDelete }\r\n  }\r\n}\r\n</script>"],"mappings":";AAsBA,OAAOA,gBAAe,MAAO,mCAAmC;AAChE,SAASC,GAAG,EAAEC,SAAQ,QAAS,KAAI;AACnC,OAAOC,cAAa,MAAO,2BAA0B;AACrD,OAAOC,YAAW,MAAO,+BAA8B;AACvD,SAASC,SAAQ,QAAS,YAAW;AAErC,eAAe;EACbC,UAAU,EAAE;IAAEF,YAAY;IAAEJ;EAAiB,CAAC;EAC9CO,KAAKA,CAAA,EAAG;IACN,MAAMC,QAAO,GAAIP,GAAG,CAAC,EAAE;IACvB,MAAMQ,KAAI,GAAIR,GAAG,CAAC,IAAI;IACtB,MAAMS,OAAM,GAAIT,GAAG,CAAC,IAAI;IACxB,MAAMU,MAAK,GAAIN,SAAS,CAAC;IAEzB,MAAMO,IAAG,GAAI,MAAAA,CAAA,KAAY;MACvBH,KAAK,CAACI,KAAI,GAAI,IAAG;MACjB,IAAI;QACF,MAAMC,GAAE,GAAI,MAAMX,cAAc,CAACY,cAAc,CAAC;QAChDP,QAAQ,CAACK,KAAI,GAAIC,GAAG,CAACE,IAAG;MAC1B,EAAE,OAAOC,GAAG,EAAE;QACZR,KAAK,CAACI,KAAI,GAAI,0BAAyB;QACvCK,OAAO,CAACT,KAAK,CAACQ,GAAG;MACnB;IACF;IAEA,MAAME,MAAK,GAAKC,EAAE,IAAK;MACrBT,MAAM,CAACU,IAAI,CAAC;QAAEC,IAAI,EAAE,aAAa;QAAEC,MAAM,EAAE;UAAEH;QAAG;MAAE,CAAC;IACrD;IAEA,MAAMI,QAAO,GAAIA,CAAA,KAAM;MACrBb,MAAM,CAACU,IAAI,CAAC;QAAEC,IAAI,EAAE;MAAgB,CAAC;IACvC;IAEA,MAAMG,YAAW,GAAI,MAAOL,EAAE,IAAK;MACjCX,KAAK,CAACI,KAAI,GAAI,IAAG;MACjBH,OAAO,CAACG,KAAI,GAAI,IAAG;MACnB,IAAI;QACF,MAAMV,cAAc,CAACuB,aAAa,CAACN,EAAE;QACrCV,OAAO,CAACG,KAAI,GAAI,kCAAiC;QACjD,MAAMD,IAAI,CAAC;MACb,EAAE,OAAOK,GAAG,EAAE;QACZR,KAAK,CAACI,KAAI,GAAI,2BAA0B;QACxCK,OAAO,CAACT,KAAK,CAACQ,GAAG;MACnB;IACF;IAEAf,SAAS,CAACU,IAAI;IAEd,OAAO;MAAEJ,QAAQ;MAAEC,KAAK;MAAEC,OAAO;MAAES,MAAM;MAAEK,QAAQ;MAAEC;IAAa;EACpE;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}