{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createBlock as _createBlock, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  class: \"flex-grow-1 p-4 bg-light\"\n};\nconst _hoisted_2 = {\n  key: 0,\n  class: \"mb-3\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"alert alert-danger\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_SidebarComponent = _resolveComponent(\"SidebarComponent\");\n  const _component_ProductForm = _resolveComponent(\"ProductForm\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createCommentVNode(\" Barra superior \"), _createVNode(_component_SidebarComponent), _createElementVNode(\"div\", _hoisted_1, [_cache[0] || (_cache[0] = _createElementVNode(\"h3\", null, \"Editar producto\", -1 /* CACHED */)), $setup.loading ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, \"Cargando...\")) : _createCommentVNode(\"v-if\", true), $setup.error ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, _toDisplayString($setup.error), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), $setup.product ? (_openBlock(), _createBlock(_component_ProductForm, {\n    key: 2,\n    product: $setup.product,\n    saving: $setup.saving,\n    onSubmit: $setup.submit,\n    onCancel: $setup.cancel\n  }, null, 8 /* PROPS */, [\"product\", \"saving\", \"onSubmit\", \"onCancel\"])) : _createCommentVNode(\"v-if\", true)])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","_createCommentVNode","_createVNode","_component_SidebarComponent","_createElementVNode","_hoisted_1","$setup","loading","_createElementBlock","_hoisted_2","error","_hoisted_3","_toDisplayString","product","_createBlock","_component_ProductForm","saving","onSubmit","submit","onCancel","cancel"],"sources":["C:\\Users\\SCIS2PC21\\Desktop\\1111\\trabajosDesarrolloWeb\\app-crud\\src\\views\\ProductEditView.vue"],"sourcesContent":["<template>\r\n  <!-- Barra superior -->\r\n    <SidebarComponent />\r\n  <div class=\"flex-grow-1 p-4 bg-light\">\r\n   <h3>Editar producto</h3>\r\n\r\n<div v-if=\"loading\" class=\"mb-3\">Cargando...</div>\r\n    <div v-if=\"error\" class=\"alert alert-danger\">{{ error }}</div>\r\n\r\n    <ProductForm\r\n      v-if=\"product\"\r\n      :product=\"product\"\r\n      :saving=\"saving\"\r\n      @submit=\"submit\"\r\n      @cancel=\"cancel\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport SidebarComponent from '@/components/SidebarComponent.vue';\r\nimport { ref, onMounted } from 'vue'\r\nimport productService from '@/services/productService'\r\nimport ProductForm from '@/components/ProductForm.vue'\r\nimport { useRouter, useRoute } from 'vue-router'\r\n\r\nexport default {\r\n  components: { ProductForm, SidebarComponent },\r\n  setup() {\r\n    const product = ref(null)\r\n    const loading = ref(true)\r\n    const error = ref(null)\r\n    const saving = ref(false)\r\n\r\n    const router = useRouter()\r\n    const route = useRoute()\r\n    const id = route.params.id\r\n\r\n    const load = async () => {\r\n      loading.value = true\r\n      error.value = null\r\n      try {\r\n        const res = await productService.getProductById(id)\r\n        product.value = res.data\r\n      } catch (err) {\r\n        error.value = 'Error cargando el producto'\r\n        console.error(err)\r\n      } finally {\r\n        loading.value = false\r\n      }\r\n    }\r\n\r\n    const submit = async (payload) => {\r\n      saving.value = true\r\n      error.value = null\r\n      try {\r\n        await productService.updateProduct(id, payload)\r\n        router.push({ name: 'ProductList' })\r\n      } catch (err) {\r\n        error.value = 'Error actualizando producto'\r\n        console.error(err)\r\n      } finally {\r\n        saving.value = false\r\n      }\r\n    }\r\n\r\n    const cancel = () => {\r\n      router.push({ name: 'ProductList' })\r\n    }\r\n\r\n    onMounted(load)\r\n\r\n    return { product, loading, error, saving, submit, cancel }\r\n  }\r\n}\r\n</script>"],"mappings":";;EAGOA,KAAK,EAAC;AAA0B;;;EAGnBA,KAAK,EAAC;;;;EACJA,KAAK,EAAC;;;;;6DAN1BC,mBAAA,oBAAuB,EACrBC,YAAA,CAAoBC,2BAAA,GACtBC,mBAAA,CAaM,OAbNC,UAaM,G,0BAZLD,mBAAA,CAAwB,YAApB,iBAAe,qBAEXE,MAAA,CAAAC,OAAO,I,cAAlBC,mBAAA,CAAkD,OAAlDC,UAAkD,EAAjB,aAAW,K,mCAC7BH,MAAA,CAAAI,KAAK,I,cAAhBF,mBAAA,CAA8D,OAA9DG,UAA8D,EAAAC,gBAAA,CAAdN,MAAA,CAAAI,KAAK,oB,mCAG7CJ,MAAA,CAAAO,OAAO,I,cADfC,YAAA,CAMEC,sBAAA;;IAJCF,OAAO,EAAEP,MAAA,CAAAO,OAAO;IAChBG,MAAM,EAAEV,MAAA,CAAAU,MAAM;IACdC,QAAM,EAAEX,MAAA,CAAAY,MAAM;IACdC,QAAM,EAAEb,MAAA,CAAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}